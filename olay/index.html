<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.fuchsia.min.css">
    <style>
        a:link, a:visited { text-decoration-style: dotted; }
        a:focus, a:hover, a:active { text-decoration-style: wavy; }
        details summary { font-weight: bold; }
        details summary:hover { color: var(--pico-primary); }
        footer {  text-align: center; margin-top: 50vh; }
        .ti { background: linear-gradient(to right, var(--pico-primary), var(--pico-h1-color)); background-clip: text; color: transparent; }
        [x-cloak] { display: none !important; }
    </style>
    <title>Olay | Livestream overlay stuff</title>
</head>
<body>
    <noscript>Olay needs JavaScript to work but it is disabled it in your webbrowser.</noscript>

    <header class="container">
        <h1><span class="ti">Olay</span></h1>
        <p>
            Livestream overlay stuff for use
            as <a href="https://obsproject.com/kb/browser-source" target="_blank">Browser-Source</a>
            in <a href="https://obsproject.com" target="_blank">OBS Studio</a>.
        </p>

        <details>
            <summary>[get started]</summary>

            <!--
            User Guide
            TODO: rewrite this in more comprehendable form.
            -->
            <p>
                <strong>1.</strong> Setup and preview the overlays below.
                If you do not enter any values, defaults will be used.
            </p>
            <p>
                <strong>2.</strong> When you're happy with the preview, copy & paste the URL into OBS' Browser-Source.
            </p>
            <p>
                <strong>3.</strong> Remove all code from the CSS field of the Browser-Source.
                <span class="ti">Olay</span> will load its own styles for each overlay.
            </p>
            <p>
                <strong>4.</strong> Optionally, copy & paste the parts of the default CSS <small>(linked for each module below)</small> you want to adjust into the CSS field of the Browser-Source and start adjusting it to your liking.
                Advanced users can also do this in the developer console of the webbrowser <small>(navigate to the <em>Style Editor</em> - Tab and select <em>style.css</em>)</small> - this has the benefit of providing a realtime preview of your changes.
            </p>
            <p>
                Feel free to <a href="https://github.com/etrusci-org/olay/discussions" target="_blank">start a new discussion</a> if you need more help with, or have specific questions about, <span class="ti">Olay</span>.
            </p>

            <hr>
        </details>
    </header>




    <main class="container">

        <!-- Clock -->
        <article
            x-data="{
                type: 'human',
                end_message: '',
                update_end_message() {
                    if (this.type == 'human') this.end_message = '{year}-{month}-{day} {hour}:{minute}:{second}'
                    if (this.type == 'beats') this.end_message = '@{beats}'
                },
            }"
            x-init="update_end_message()"
        >
            <h2><span class="ti">Clock</span></h2>
            <p>Current local date and time.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/clock/" method="get" target="_blank">
                    <label>
                        Type
                        <select name="type" x-model="type" x-on:change="update_end_message()">
                            <option value="human" selected>human : Human-readable date/time</option>
                            <option value="beats">beats : Internet Time</option>
                            <option value="unix">unix : Unix Timestamp in seconds</option>
                            <option value="unixms">unixms : Unix Timestamp in milliseconds</option>
                        </select>
                    </label>

                    <label x-show="['unix', 'beats'].includes(type)" x-cloak>
                        Decimals
                        <input type="number" name="decimals" min="0" max="100" step="1" placeholder="0">
                    </label>

                    <label>
                        Update rate
                        <input type="number" name="updaterate" min="0" step="any" placeholder="0.5">
                        <small>
                            Seconds.
                        </small>
                    </label>

                    <label x-show="['human', 'beats'].includes(type)" x-cloak>
                        Format
                        <input type="text" name="format" x-bind:placeholder="end_message">
                        <small>
                            <span x-show="type == 'human'" x-cloak>
                                Available variables:
                                <code>{year}</code>
                                <code>{month}</code>
                                <code>{day}</code>
                                <code>{hour}</code>
                                <code>{minute}</code>
                                <code>{second}</code>
                                <code>{millisecond}</code>
                                <code>{timezoneOffset}</code>
                            </span>
                            <span x-show="type == 'beats'" x-cloak>
                                Available variables:
                                <code>{beats}</code>
                            </span>
                        </small>
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/clock/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>
            </details>

        </article>


        <!-- Colorfader -->
        <article
            x-data="{}"
            x-init=""
        >
            <h2><span class="ti">Colorfader</span></h2>
            <p>Fade through random colors.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/colorfader/" method="get" target="_blank">

                    <label>
                        Transition duration
                        <input type="number" name="duration" min="0" step="any" placeholder="3">
                        <small>
                            Seconds.
                        </small>
                    </label>

                    <label>
                        Transition function
                        <select name="func">
                            <option value="ease-in-out" selected>ease-in-out</option>
                            <option value="ease-in">ease-in</option>
                            <option value="ease-out">ease-out</option>
                            <option value="ease">ease</option>
                            <option value="linear">linear</option>
                            <option value="step-start">step-start</option>
                            <option value="step-end">step-end</option>
                        </select>
                    </label>

                    <label>
                        Red minimum
                        <input type="number" name="r_min" min="0" max="255" step="1" placeholder="70">
                    </label>

                    <label>
                        Red maximum
                        <input type="number" name="r_max" min="0" max="255" step="1" placeholder="180">
                    </label>

                    <label>
                        Green minimum
                        <input type="number" name="g_min" min="0" max="255" step="1" placeholder="70">
                    </label>

                    <label>
                        Green maximum
                        <input type="number" name="g_max" min="0" max="255" step="1" placeholder="180">
                    </label>

                    <label>
                        Blue minimum
                        <input type="number" name="b_min" min="0" max="255" step="1" placeholder="70">
                    </label>

                    <label>
                        Blue maximum
                        <input type="number" name="b_max" min="0" max="255" step="1" placeholder="180">
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/colorfader/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>
            </details>



        </article>


        <!-- Countdu -->
        <article
            x-data="{
                type: 'number',
                end_message_placeholder: '',
                update_end_message_placeholder() {
                    if (this.type == 'number') this.end_message_placeholder = 'end number reached: {end_number}'
                    if (this.type == 'time') this.end_message_placeholder = 'end time reached: {end_time}'
                },
            }"
            x-init="update_end_message_placeholder()"
        >
            <h2><span class="ti">Countdu</span></h2>
            <p>Count down/up.</p>
            <!-- if ResistFingerprinting is turned on in the webbrowser, type=time will not yield correct results. -->

            <details open>
                <summary>[setup]</summary>

                <form action="./mod/countdu/" method="get" target="_blank">
                    <label>
                        Type
                        <select name="type" x-model="type" x-on:change="update_end_message_placeholder()">
                            <option value="number" selected>number : From number to number</option>
                            <option value="time">time : From now to time</option>
                        </select>
                    </label>

                    <label>
                        Counting speed
                        <input type="number" name="countingspeed" min="0" step="any" placeholder="1">
                        <small>
                            Seconds.
                        </small>
                    </label>

                    <label x-show="type == 'number'" x-cloak>
                        Start number
                        <input type="number" name="number_start" step="any" placeholder="0">
                    </label>

                    <label x-show="type == 'number'" x-cloak>
                        End number
                        <input type="number" name="number_end" step="any" placeholder="5">
                    </label>

                    <label x-show="type == 'time'" x-cloak>
                        End time
                        <input type="text" name="time_end" placeholder="YYYY-MM-DD HH:MM:SS">
                        <small>
                            In your local timezone.
                        </small>
                    </label>

                    <label>
                        On end message
                        <input type="text" name="end_message" x-bind:placeholder="end_message_placeholder">
                        <small>
                            <span x-show="type == 'number'" x-cloak>
                                Available variables:
                                <code>{end_number}</code>
                            </span>
                            <span x-show="type == 'time'" x-cloak>
                                Available variables:
                                <code>{end_time}</code>
                            </span>
                            <br>Set to <code>none</code> to show nothing on end.
                        </small>
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/countdu/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>
            </details>
        </article>


        <!-- Floater -->
        <article
            x-data="{}"
            x-init=""
        >
            <h2><span class="ti">Floater</span></h2>
            <p>Text floater.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/floater/" method="get" target="_blank">
                    <label>
                        Text
                        <input type="text" name="text" placeholder="hello&lt;br&gt;cruel&lt;br&gt;world">
                    </label>

                    <label>
                        Velocity on x-axis
                        <input type="number" name="vel_x" min="0" step="any" placeholder="1.0">
                    </label>

                    <label>
                        Velocity on y-axis
                        <input type="number" name="vel_y" min="0" step="any" placeholder="1.0">
                    </label>

                    <label>
                        <input type="checkbox" name="flip_x" value="true">
                        Flip x-axis on left and right edge collision
                    </label>

                    <label>
                        <input type="checkbox" name="flip_y" value="true">
                        Flip y-axis on top and bottom edge collision
                    </label>

                    <label>
                        <input type="checkbox" name="colorchange" value="true">
                        Change to random color on edge collision
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/floater/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>

            </details>
        </article>


        <!-- Goal -->
        <article
            x-data="{}"
            x-init=""
        >
            <h2><span class="ti">Goal</span></h2>
            <p>Goal status.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/goal/" method="get" target="_blank">
                    <label>
                        Description
                        <input type="text" name="description" placeholder="Road to something">
                    </label>

                    <label>
                        Current value
                        <input type="number" name="current" min="0" step="any" placeholder="5">
                    </label>

                    <label>
                        Target value
                        <input type="number" name="target" min="0" step="any" placeholder="10">
                    </label>

                    <label>
                        Value unit
                        <input type="text" name="unit" placeholder="something">
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/goal/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>

            </details>
        </article>


        <!-- Quotes -->
        <article
            x-data=""
            x-init=""
        >
            <h2><span class="ti">Quotes</span></h2>
            <p>Random quotes.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/quotes/" method="get" target="_blank">
                    <label>
                        Update rate
                        <input type="number" name="updaterate" min="10" step="any" placeholder="60">
                        <small>
                            Seconds.
                        </small>
                    </label>

                    <label>
                        Typing speed
                        <input type="number" name="typingspeed" min="0" step="any" placeholder="0.05">
                        <small>
                            Seconds.<br>
                            Set to <code>0</code> to disable the typing effect.
                        </small>
                    </label>

                    <label>
                        Quote format
                        <input type="text" name="format_quote" placeholder="&quot;{quote}&quot;">
                        <small>
                            Available variables:
                            <code>{quote}</code>
                        </small>
                    </label>

                    <label>
                        Author format
                        <input type="text" name="format_author" placeholder="— {author}">
                        <small>
                            Available variables:
                            <code>{author}</code>
                        </small>
                    </label>

                    <label>
                        API endpoint
                        <input type="text" name="endpoint" placeholder="https://pdv.ourspace.ch/api/collections/random_quote/records/1?fields=author,quote">
                        <small>
                            Must return a JSON response with an author and quote field.
                            E.g.: <code>{author: string, quote: string}</code>
                        </small>
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/quotes/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>

            </details>
        </article>


        <!-- Rotator -->
        <article
            x-data=""
            x-init=""
        >
            <h2><span class="ti">Rotator</span></h2>
            <p>Rotate through text items.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/rotator/" method="get" target="_blank">
                    <label>
                        Items
                        <input type="text" name="items" placeholder="one|two|tree|four">
                        <small>
                            Separate multiple with <code>|</code>
                        </small>
                    </label>

                    <label>
                        Update rate
                        <input type="number" name="updaterate" min="0" step="any" placeholder="3">
                        <small>
                            Seconds.
                        </small>
                    </label>

                    <label>
                        <input type="checkbox" name="shuffle" value="true">
                        Random rotation order
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/rotator/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>

            </details>
        </article>


        <!-- TwitchChat -->
        <article
            x-data="{ parse_emotes: false }"
            x-init=""
        >
            <h2><span class="ti">TwitchChat</span></h2>
            <p>Messages from one or more Twitch chats.</p>

            <details>
                <summary>[setup]</summary>

                <form action="./mod/twitchchat/" method="get" target="_blank">
                    <label>
                        Channel(s) to join
                        <input type="text" name="channels" placeholder="chanone|chantwo" required>
                        <small>
                            Separate multiple with <code>|</code>
                        </small>
                    </label>

                    <label>
                        User(s) to ignore
                        <input type="text" name="ignore" placeholder="userone|usertwo">
                        <small>
                            Separate multiple with <code>|</code>.<br>
                            Enter user names, not display names.
                        </small>
                    </label>

                    <label>
                        Timestamp format
                        <input type="text" name="timeformat" placeholder="{hour}:{minute}:{second}">
                        <small>
                            Available variables:
                            <code>{year}</code>
                            <code>{month}</code>
                            <code>{day}</code>
                            <code>{hour}</code>
                            <code>{minute}</code>
                            <code>{second}</code>
                            <code>{millisecond}</code>
                            <code>{timezoneOffset}</code>
                            <code>{beats}</code><br>
                            If the variable <code>{beats}</code> is present, other format variables will be ignored and the decimals will be auto-set to <code>2</code>.
                        </small>
                    </label>

                    <label>
                        Messages limit
                        <input type="number" name="limit" min="1" step="1" placeholder="100">
                    </label>

                    <label>
                        Remove old messages after
                        <input type="number" name="removeafter" min="0" step="any" placeholder="0">
                        <small>
                            Seconds.<br>
                            Set to <code>0</code> to keep all (still respecting limit).
                        </small>
                    </label>

                    <label>
                        <input type="checkbox" name="usercolor" value="true">
                        Use user color
                    </label>

                    <label>
                        <input type="checkbox" name="emotes" value="true" x-model="parse_emotes">
                        Parse emotes
                    </label>

                    <label x-show="parse_emotes" x-cloak>
                        Emotes theme
                        <select name="emotestheme">
                            <option value="light" selected>light</option>
                            <option value="dark">dark</option>
                        </select>
                    </label>

                    <label x-show="parse_emotes" x-cloak>
                        Emotes size
                        <select name="emotessize">
                            <option value="large">large</option>
                            <option value="medium" selected>medium</option>
                            <option value="small">small</option>
                        </select>
                    </label>

                    <hr>

                    <fieldset class="grid">
                        <input type="submit" value="preview &nearr;">
                        <input type="reset" value="reset to defaults">
                    </fieldset>

                    <p><a href="./mod/twitchchat/style.css" target="_blank" role="button" class="outline cb">Default CSS &nearr;</a></p>
                </form>

            </details>
        </article>

    </main>




    <footer class="container">
        <p>
            <strong class="ti">Olay</strong><br>
            made by
            <a
                href="https://etrusci.org" target="_blank"
                class="cf"
                data-dur="1.5"
                data-func="ease-in-out"
                data-target="text"
            >arT2</a>
        </p>
        <p>
            <a href="https://github.com/etrusci-org/olay" target="_blank">source-code</a>
        </p>
    </footer>




    <script type="module" defer>
        // @ts-check
        import { ElColorfader } from './lib/elcolorfader.mjs'

        // auto-theme depending on daytime
        window.addEventListener('load', () => {
            const h = new Date().getHours()
            if (h >= 6 && h <= 17) {
                document.documentElement.dataset['theme'] = 'light'
            }
            else {
                document.documentElement.dataset['theme'] = 'dark'
            }

            // cachebust on module style links
            document.querySelectorAll('a.cb').forEach((ele) => ele.setAttribute('href', ele.getAttribute('href') + `?cb=${Date.now()}`))

            // because
            new ElColorfader().start()
        })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js" defer></script>
</body>
</html>
